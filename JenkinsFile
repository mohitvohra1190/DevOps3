node
{


        stage('Code Checkout')
        {

        git 'https://github.com/mohitvohra1190/Devops3'
        }


    stage('Compile')
    {
         echo 'before compiling'

        def mvnHome = tool name: 'maven_3_6_3', type: 'maven'

        echo "${mvnHome}"
                bat = "${mvnHome}/bin/mvn clean compile"
                echo 'after compiling'

     }

stage ('testing')
     {
         def mvnHome = tool name: 'maven_3_6_3', type: 'maven'
         bat = "${mvnHome}/bin/mvn test"

     }

       stage('results') {

                def export = {
                  // create a new file
                  FileOutputStream out = new FileOutputStream("workbook.xls");
                  // create a new workbook
                  Workbook wb = new HSSFWorkbook();
                  // create a new sheet
                  Sheet s = wb.createSheet();

                  int rownum = 0
                  for (ClaimDocumentReferenceDTO ref : docRefs) {
                    // create a row
                    Row r = s.createRow(rownum++)
                    for (int cellnum=0; cellnum <10; cellnum++) {
                      Cell c = r.createCell(cellnum);
                      c.setCellValue( "Test" );
                    }
                  }
                  wb.write(out);
                  out.close();
                }

         }






}